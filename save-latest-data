import requests
import json

# WindGuru API details
STATION_UID = "YOUR_STATION_UID"  # Replace with your actual station UID
API_URL = f"http://www.windguru.cz/int/wgsapi.php?uid={STATION_UID}"

# Function to fetch the latest weather data
def fetch_latest_weather():
    try:
        response = requests.get(API_URL)
        if response.status_code == 200:
            data = response.json()  # Convert response to dictionary
            if data and "measurements" in data:
                latest_data = data["measurements"][-1]  # Select the latest entry
                return latest_data
            else:
                print("No data found for this station.")
                return None
        else:
            print(f"Error fetching data: {response.status_code}")
            return None
    except Exception as e:
        print(f"An error occurred: {e}")
        return None

# Retrieve latest data and store in a variable
latest_weather_data = fetch_latest_weather()

# Print the latest weather data
if latest_weather_data:
    print("Latest Weather Data:", latest_weather_data)
else:
    print("No latest data available.")
